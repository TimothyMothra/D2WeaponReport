<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net5.0</TargetFramework>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.TypeScript.MSBuild" Version="4.4.4">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <!--<PackageReference Include="Microsoft.VisualStudio.Web.BrowserLink" Version="2.2.0" />-->
    
    <ProjectReference Include="..\DestinyLib\DestinyLib.csproj" />
  </ItemGroup>


  <Target Name="TypescriptVerification" AfterTargets="Build">
    <PropertyGroup>
      <ExpectedTypescriptCompiledOutputFile>$(SourceRoot)\SandboxWeb\wwwroot\scripts\1app.js</ExpectedTypescriptCompiledOutputFile>
    </PropertyGroup>
    
    <Message Importance="high" Text="Verify Typescript was compiled and published to wwwroot..." />
    <Message Importance="high" Text="File: '$(ExpectedTypescriptCompiledOutputFile)' was found." Condition="Exists($(ExpectedTypescriptCompiledOutputFile))" />
    <Message Importance="high" Text="File: '$(ExpectedTypescriptCompiledOutputFile)' was NOT found! This is configured in 'tsconfig.json'. This could be a problem with either Node or NPM." Condition="!Exists($(ExpectedTypescriptCompiledOutputFile))" />
    <Error  Text="Typescript compiled output not found: '$(ExpectedTypescriptCompiledOutputFile)'. This is configured in 'tsconfig.json'. This could be a problem with either Node or NPM." Condition="!Exists($(ExpectedTypescriptCompiledOutputFile))" />
  </Target>
  
</Project>
